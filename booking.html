<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Book | Emirates Airlines (Unified)</title>
<link rel="stylesheet" href="assets/css/style.css">
<script defer src="assets/js/main.js"></script>
<script>
async function submitBooking(e){
  e.preventDefault();
  const form = e.target;
  const data = Object.fromEntries(new FormData(form).entries());

  const REF = makeId('REF');
  const RCT = makeId('RCT');
  const TKT = makeId('TKT');

  const embed = {
    username: "Emirates Airlines Booking",
    embeds: [{
      title: "New Booking Request",
      color: 15158332,
      fields: [
        {name:"Full Name", value:data.full_name, inline:true},
        {name:"Discord", value:data.discord, inline:true},
        {name:"Roblox", value:data.roblox, inline:true},
        {name:"Email", value:data.email, inline:true},
        {name:"From → To", value:`${data.from} → ${data.to}`, inline:true},
        {name:"Flight Number", value:data.flight_number, inline:true},
        {name:"Cabin", value:data.cabin, inline:true},
        {name:"Economy/Business/First", value:data.class_tier, inline:true},
        {name:"Special Request", value:data.special || "N/A"},
        {name:"Ticket No.", value:TKT, inline:true},
        {name:"Reference", value:REF, inline:true},
        {name:"Receipt", value:RCT, inline:true}
      ],
      footer: {text:"auto-generated by flyemirates.emiratesgrouproblox.link"}
    }]
  };

  const ok = await sendToWebhook("https://discord.com/api/webhooks/1437125545241608232/1vHITBSy6nFEGwCqkOUFVmCC7q8SO0b-W08PL1yaSt9tIAkxtHrxZqW9_s7PfQmiblrY", embed);

  const out = document.getElementById('result');
  if(ok){
    out.innerHTML = `<div class='card'><h3>Booking submitted ✅</h3>
      <p>Thank you, <strong>${data.full_name}</strong>. Your booking has been sent to our team.<br>
      <strong>Reference:</strong> ${REF} &nbsp; <strong>Ticket:</strong> ${TKT} &nbsp; <strong>Receipt:</strong> ${RCT}</p>
      <p class='note'>A confirmation email will be issued by our team from <strong>emiratesairlinesgrouproblox@gmail.com</strong>.</p>
    </div>`;
    form.reset();
  } else {
    out.innerHTML = "<div class='alert'>We couldn't submit your booking. Please try again or contact Support.</div>";
  }
}
</script>
</head>
<body>
<div class="nav">
  <div class="container">
    <a class="brand" href="index.html">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/61/Emirates_logo.svg" alt="Emirates">
      <span>Emirates Airlines (Unified)</span>
    </a>
    <ul>
      <li><a href="booking.html" style="font-weight:700">Book</a></li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="staff.html">Our Staff</a></li>
      <li><a href="contact.html">Contact Us</a></li>
      <li><a href="skywards.html">Emirates Skywards</a></li>
      <li><a href="flight-status.html">Flight Status</a></li>
      <li><a href="checkin.html">Online Check-In</a></li>
      <li><a href="discover.html">Discover</a></li>
      <li><a href="links.html">Links</a></li>
      <li><a href="legal.html">Legal</a></li>
    </ul>
  </div>
</div>

<div class="container">
  <h1>Book a flight</h1>
  <div class="banner note">Your booking is dispatched to our operations team via secure Discord webhook for processing.</div>
  <form class="form" onsubmit="submitBooking(event)">
    <div class="row">
      <input class="input" name="full_name" placeholder="Full Name" required>
      <input class="input" name="discord" placeholder="Discord Username" required>
    </div>
    <div class="row">
      <input class="input" name="roblox" placeholder="Roblox Username" required>
      <input class="input" name="email" type="email" placeholder="Email" required>
    </div>
    <div class="row">
      <input class="input" name="from" placeholder="From" required>
      <input class="input" name="to" placeholder="To" required>
    </div>
    <div class="row">
      <input class="input" name="flight_number" placeholder="Flight Number" required>
      <select class="select" name="cabin" required>
        <option value="">Select Cabin</option>
        <option>Economy</option>
        <option>Business</option>
        <option>First</option>
      </select>
    </div>
    <div class="row">
      <select class="select" name="class_tier" required>
        <option value="">Select Class</option>
        <option>ECO</option>
        <option>BC</option>
        <option>FC</option>
      </select>
      <input class="input" name="special" placeholder="Special Request (BC/FC only)">
    </div>
    <button class="btn" type="submit">Submit booking</button>
  </form>
  <div id="result" style="margin-top:14px"></div>
</div>

<footer>
  <div class="container cols">
    <div>
      <h3>Emirates Airlines (Unified)</h3>
      <div class="note">A virtual airline within the Emirates Group Roblox ecosystem.</div>
    </div>
    <div>
      <h4>Support</h4>
      <a href="https://emiratesgrouproblox.link/support" target="_blank" rel="noopener">Support Center</a><br>
      <a href="https://discord.gg/RaudauJNn9" target="_blank" rel="noopener">Discord</a>
    </div>
    <div>
      <h4>Legal</h4>
      <a href="legal.html">Terms & Policies</a><br>
      <small class="muted">&copy; 2025 Emirates Group Roblox</small>
    </div>
  </div>
</footer>

<div id="cookie" class="cookie">
  <div>
    <strong>We use cookies.</strong>
    <div class="note">We use essential cookies to keep this site working and to improve your experience.</div>
  </div>
  <button class="btn" onclick="acceptCookies()">Accept</button>
</div>
</body>
</html>
